<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo List App</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>

<body>
    <div class="container mt-5">
        <h1>Todo List App</h1>
        <form>
            <div class="form-group">
                <input type="text" class="form-control" id="task" placeholder="Enter task">
            </div>
            <button type="button" class="btn btn-primary" id="addTaskBtn">Add Task</button>
        </form>
        <table class="table mt-4">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Task</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody id="taskList">
            </tbody>
        </table>
    </div>

    <!-- Firebase Firestore JavaScript SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-firestore.js"></script>

    <!-- Your Firebase project's configuration -->
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyC9Tne9fcJZi8yz50q-wwosH83LlfhIus4",
            authDomain: "blue-b2e9c.firebaseapp.com",
            projectId: "blue-b2e9c",
            storageBucket: "blue-b2e9c.appspot.com",
            messagingSenderId: "19520597692",
            appId: "1:19520597692:web:0d600c97799dae36ae6ab9",
            measurementId: "G-TJ9H53VGN7"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        var db = firebase.firestore();
    </script>

    <!-- jQuery and Bootstrap JavaScript -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <!-- Custom JavaScript code -->
    <script>
        // Add task to Firebase Firestore
        function addTask(task) {
            db.collection("tasks").add({
                task: task
            })
                .then(function (docRef) {
                    console.log("Task added with ID: ", docRef.id);
                })
                .catch(function (error) {
                    console.error("Error adding task: ", error);
                });
        }

        // Load tasks from Firebase Firestore
        function loadTasks() {
            db.collection("tasks").get().then(function (querySnapshot) {
                querySnapshot.forEach(function (doc) {
                    var task = doc.data().task;
                    var taskId = doc.id;
                    $("#taskList").append("<tr><td>" + taskId + "</td><td>" + task + "</td><td><button type='button' class='btn btn-danger btn-sm' onclick='deleteTask(\"" + taskId + "\")'>Delete</button></td></tr>");
                });
            });
        }
        // function loadTasks() {
        //     db.collection("tasks").get().then((querySnapshot) => {
        //         const taskList = document.getElementById("task-list");
        //         taskList.innerHTML = "";
        //         querySnapshot.forEach((doc) => {
        //             const task = doc.data();
        //             const listItem = document.createElement("li");
        //             listItem.textContent = task.title;
        //             taskList.appendChild(listItem);
        //         });
        //     });
        // }


        // Delete task from Firebase Firestore
        // function deleteTask(taskId) {
        //     db.collection("tasks").doc(taskId).delete().then(function() {
        //         console.log("Task deleted with ID: ", taskId);
        //     }).catch(function
        function deleteTask(taskId) {
            db.collection("tasks").doc(taskId).delete().then(function () {
                console.log("Task deleted with ID: ", taskId);
                // Remove the task from the UI
                $("#" + taskId).remove();
            }).catch(function (error) {
                console.error("Error deleting task: ", error);
            });
        }
        $(document).ready(function () {
            // Load tasks when page loads
            loadTasks();

            // Add task when Add Task button is clicked
            $("#addTaskBtn").click(function () {
                var task = $("#task").val();
                addTask(task);
                $("#task").val("");
            });
        });
    </script>
</body>

</html>